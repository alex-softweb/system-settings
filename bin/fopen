#! /usr/bin/env ruby
require 'yaml'

config_path = File.expand_path('../config/ext-maps.fopen.yml', __FILE__)
config = YAML.load(File.read(config_path))

file_path = ARGV[0]
extension = File.extname(file_path).downcase

command = config.select { |k, v| extension.match(k) }.values.first

if command
  # Path needs to be in quotes to handle filenames with spaces.
  system %(#{ command } "#{ file_path }")
else
  puts "Could not find a suitable program for the extension *#{ extension }*."
end
