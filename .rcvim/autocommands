" vim: set ft=vim:

fun! CoffeeMaker()
  set filetype=coffee
endf

function! s:SetupDiffWindow()
  if &diff
    set foldcolumn=0
    set wrap
  endif
endfunction

function! s:SetupSpacing()
  set tabstop=2
  set softtabstop=2
  set shiftwidth=2
endfunction

function! s:AddRequireLineInRspec()
  if &ft == 'rspec'
    call setline('.', "require 'spec_helper'")
  elseif &ft == 'minitest'
    call setline('.', "require 'test_helper'")
  endif
endfunction

augroup nonRepeater
 au!
 au BufRead,BufNewFile *.coffee.erb call CoffeeMaker()
 au BufRead,BufNewFile *.jst.ejs set filetype=html
 au BufRead,BufNewFile *.conf set filetype=conf
 au BufNewFile *.rb call s:AddRequireLineInRspec()
 au FileType qf nmap <buffer> <CR> :.cc<CR>
 au CmdwinEnter * nnoremap <buffer> <CR> <CR>
 au FilterWritePre * call s:SetupDiffWindow()
 au FileType notes call s:SetupSpacing()
augroup END
